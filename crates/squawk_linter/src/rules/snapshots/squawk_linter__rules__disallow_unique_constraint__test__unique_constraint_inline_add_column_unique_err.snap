---
source: crates/squawk_linter/src/rules/disallow_unique_constraint.rs
expression: "lint_errors(sql, Rule::DisallowedUniqueConstraint)"
---
warning[disallowed-unique-constraint]: Adding a `UNIQUE` constraint requires an `ACCESS EXCLUSIVE` lock which blocks reads and writes to the table while the index is built.
  ╭▸ 
2 │ ALTER TABLE foo ADD COLUMN bar text UNIQUE;
  │                                     ━━━━━━
  │
  ╰ help: Create an index `CONCURRENTLY` and create the constraint using the index.
